<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Web Storage</title>
  </head>
  <body>
    <!-- Web storage
      - Permite almacenas datos localmente en el navegador del usuario
      - Es mas seguro y almacena mas informacion que las Cookies
      - El web storage se almacena por origen ( dominio y protocolo): todas las paginas del mismo origen pueden acceder
      a los mismos datos -->
      <button type="button" id="incrementar" name="button">Incrementar</button>
      <button type="button" id="decrementar" name="button">Decrementar</button>
      <button type="button" id="logout" name="button">Logout</button>
      <p id="saludo"></p>
      <p id="contador"></p>


      <script type="text/javascript">
          // Comprobacion
        /*
          if (typeof(Storage) !== "undefined"){
            alert ("El navegador soporta web storage")
          } else {
            alert ("El navegador NO soporta web storage")
          }

          // window.localStorage: Almacena datos sin fecha de vencimiento ( siempre son cadenas)
          localStorage.setItem("nombre","Federico");
          localStorage.nombre = "Federico";
          localStorage.apellido = "Tedesco";

          // consultar elemento
          alert(localStorage.getItem("nombre"));
          alert(localStorage.apellido);

          // Borrar elemento
          localStorage.removeItem("apellido");
          alert(localStorage.getItem("nombre")+" "+localStorage.getItem("apellido"));

          //Borrar todos los elementos
          localStorage.clear();
          alert(localStorage.getItem("nombre")+" "+localStorage.getItem("apellido"));
*/
          // window.sessionStorage almacena los datos durante una session
          // Si la ventana se cierra, desaparecen los datos

          sessionStorage.setItem("nombre","Federico");
          alert(sessionStorage.getItem("nombre"));

          if (typeof(Storage) !== "undefined"){

            // LogIN
            saludar();
            // Contador
            contador();
            // Botones incrementar y Decrementar
            document.getElementById("incrementar").addEventListener("click",incrementar);
            document.getElementById("decrementar").addEventListener("click",decrementar);
            document.getElementById("logout").addEventListener("click",logout);


          } else {
            alert ("El navegador NO soporta web storage")
          }

          function saludar(){
            alert ("El navegador soporta web storage")
            if(localStorage.getItem("usuario") != null){
              document.getElementById("saludo").innerHTML ="Bienvenido de nuevo!" +localStorage.getItem("usuario")+ "!";
            } else {
              localStorage.setItem("usuario", prompt("Como te llamas?"));
              document.getElementById("saludo").innerHTML ="Primera vez!" +localStorage.getItem("usuario")+ "!";
            }
          }

          function contador(){
            if(!sessionStorage.getItem("contador")){
              sessionStorage.setItem("contador","0"); //Se utilizan cadenas
            }
            document.getElementById("contador").innerHTML = "Contador:"+ sessionStorage.getItem("contador");          }

            function incrementar() {
              sessionStorage.setItem("contador", Number(sessionStorage.getItem("contador"))+1);
              document.getElementById("contador").innerHTML = "Contador:"+ sessionStorage.getItem("contador");
            }

            function decrementar() {
              sessionStorage.setItem("contador", Number(sessionStorage.getItem("contador"))-1);
              document.getElementById("contador").innerHTML = "Contador:"+ sessionStorage.getItem("contador");
            }

            function logout(){
              alert("Usted cerro la sesion de :" +localStorage.getItem("usuario"));
              localStorage.clear();
              sessionStorage.clear();
              document.getElementById("contador").innerHTML="0";
              document.getElementById("saludo").innerHTML="Nos vimos";
            }













      </script>




  </body>
</html>
